from azure.storage.blob import BlobServiceClient

# Paramètres
connection_string = "DefaultEndpointsProtocol=https;AccountName=TON_COMPTE;AccountKey=TA_CLE;EndpointSuffix=core.windows.net"
container_name = "ton-conteneur"

# Connexion au service Blob
blob_service_client = BlobServiceClient.from_connection_string(connection_string)
container_client = blob_service_client.get_container_client(container_name)

# Liste et suppression des blobs
blobs = container_client.list_blobs()
for blob in blobs:
    print(f"Suppression de : {blob.name}")
    container_client.delete_blob(blob.name)
print("Tous les blobs ont été supprimés.")


# Paramètres
$resourceGroup = "NomDuResourceGroup"
$storageAccount = "NomDuCompteStockage"
$containerName = "nom-du-conteneur"

# Récupérer la clé de stockage
$key = (Get-AzStorageAccountKey -ResourceGroupName $resourceGroup -Name $storageAccount)[0].Value

# Créer le contexte de stockage
$ctx = New-AzStorageContext -StorageAccountName $storageAccount -StorageAccountKey $key

# Lister et supprimer les blobs
$blobs = Get-AzStorageBlob -Container $containerName -Context $ctx
foreach ($blob in $blobs) {
    Write-Host "Suppression de : $($blob.Name)"
    Remove-AzStorageBlob -Blob $blob.Name -Container $containerName -Context $ctx
}
Write-Host "Tous les blobs ont été supprimés."
