AzureDiagnostics
| where Category == "ApplicationGatewayAccessLog"
| where TimeGenerated >= ago(24h)
| where requestUri_s contains "blueway"
//
// On crée nos colonnes calculées
| extend 
    // 'timeTaken_d' supposé être en millisecondes
    DurationMs = timeTaken_d, 
    // On calcule l'heure de début (approx) = fin - durée
    StartTime = TimeGenerated - totimespan(DurationMs * 1ms),
    EndTime = TimeGenerated
//
// On sélectionne les transactions dont la durée > 10s
| where DurationMs > 10000
//
// On projette les champs utiles 
| project 
    transactionId_g,
    StartTime,
    EndTime,
    DurationMs,
    clientIP_s,
    backendIPAddress_s,
    httpStatus_d,
    backendHttpStatus_d,
    requestUri_s
| order by EndTime desc
